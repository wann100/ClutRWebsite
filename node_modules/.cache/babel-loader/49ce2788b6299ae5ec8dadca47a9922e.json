{"remainingRequest":"/Users/kognos/Documents/GitHub/tamiat/node_modules/babel-loader/lib/index.js!/Users/kognos/Documents/GitHub/tamiat/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/kognos/Documents/GitHub/tamiat/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kognos/Documents/GitHub/tamiat/src/admin/pages/Media.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kognos/Documents/GitHub/tamiat/src/admin/pages/Media.vue","mtime":1565240946488},{"path":"/Users/kognos/Documents/GitHub/tamiat/node_modules/cache-loader/dist/cjs.js","mtime":1565232945238},{"path":"/Users/kognos/Documents/GitHub/tamiat/node_modules/babel-loader/lib/index.js","mtime":1558705227210},{"path":"/Users/kognos/Documents/GitHub/tamiat/node_modules/cache-loader/dist/cjs.js","mtime":1565232945238},{"path":"/Users/kognos/Documents/GitHub/tamiat/node_modules/vue-loader/lib/index.js","mtime":1565232945777}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport firebase from 'firebase/app';\nimport 'firebase/storage';\nimport { mediaRef } from '@/admin/firebase_config';\nexport default {\n  name: 'Media',\n  data: function data() {\n    return {};\n  },\n  firebase: {\n    // load settings as an object instead of array (default)\n    media: {\n      source: mediaRef,\n      asObject: true\n    }\n  },\n  computed: {\n    images: function images() {\n      return this.media;\n    }\n  },\n  methods: {\n    deleteImage: function deleteImage(path, key) {\n      var storageRef = firebase.storage().ref(path);\n      var that = this;\n      storageRef.delete().then(function () {\n        that.$firebaseRefs.media.orderByValue().on(\"value\", function (snapshot) {\n          snapshot.forEach(function (e) {\n            if (e.val().path === path) that.$firebaseRefs.media.child(e.key).remove();\n          });\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }\n};",{"version":3,"sources":["Media.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA,OAAA,QAAA,MAAA,cAAA;AACA,OAAA,kBAAA;AACA,SAAA,QAAA,QAAA,yBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA,EAAA;AAEA,GALA;AAMA,EAAA,QAAA,EAAA;AACA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,MAAA,EAAA,QADA;AAEA,MAAA,QAAA,EAAA;AAFA;AAFA,GANA;AAaA,EAAA,QAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,aAAA,KAAA,KAAA;AACA;AAHA,GAbA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,uBACA,IADA,EACA,GADA,EACA;AACA,UAAA,UAAA,GAAA,QAAA,CAAA,OAAA,GAAA,GAAA,CAAA,IAAA,CAAA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,MAAA,UAAA,CAAA,MAAA,GAAA,IAAA,CAAA,YAAA;AACA,QAAA,IAAA,CAAA,aAAA,CAAA,KAAA,CAAA,YAAA,GAAA,EAAA,CAAA,OAAA,EAAA,UAAA,QAAA,EAAA;AACA,UAAA,QAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,gBAAA,CAAA,CAAA,GAAA,GAAA,IAAA,KAAA,IAAA,EACA,IAAA,CAAA,aAAA,CAAA,KAAA,CAAA,KAAA,CAAA,CAAA,CAAA,GAAA,EAAA,MAAA;AACA,WAHA;AAIA,SALA;AAOA,OARA,EAQA,KARA,CAQA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,KAAA;AACA,OAVA;AAWA;AAfA;AAlBA,CAAA","sourcesContent":["<template>\n  <div>\n    <div class=\"gallery\" v-if=\"!media.hasOwnProperty('.value')\">\n      <a class=\"img-container\" v-for=\"(img, key) in images\" :key=\"key\" v-if=\"img.src && img.path\">\n        <div @click=\"deleteImage(img.path, key)\" class=\"delete delete-button\"></div>\n        <div class=\"image-div\" :style=\"{ 'background-image': 'url(' + img.src + ')' }\"></div>\n        <div class=\"info-tab\"> {{img.name}} </div>\n      </a>\n    </div>\n  </div>\n</template>\n\n<script>\nimport firebase from 'firebase/app'\nimport 'firebase/storage'\nimport { mediaRef } from '@/admin/firebase_config'\n\nexport default {\n  name: 'Media',\n  data: function () {\n    return {\n    }\n  },\n  firebase: {\n    // load settings as an object instead of array (default)\n    media: {\n      source: mediaRef,\n      asObject: true\n    }\n  },\n  computed: {\n    images () {\n      return this.media\n    }\n  },\n  methods: {\n    deleteImage (path, key) {\n      let storageRef = firebase.storage().ref(path)\n      var that = this\n      storageRef.delete().then(function () {\n      that.$firebaseRefs.media.orderByValue().on(\"value\", function(snapshot) {\n        snapshot.forEach(e => {\n          if (e.val().path === path)\n          that.$firebaseRefs.media.child(e.key).remove()\n        });\n      })\n        \n      }).catch(function (error) {\n        console.error(error)\n      }) \n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\" scoped>\n.img-container {\n  margin: 10px;\n  position: relative;\n  background-color: white;\n  width: 400px;\n  height: 400px;\n}\n.delete-button {\n  position: absolute;\n  top: 20px;\n  right: 20px;\n}\n\n.info-tab {\n  position: absolute;\n  bottom: 0px;\n  height: 28px;\n  width: 100%;\n  padding: 4px;\n  background-color: black;\n  color: white;\n  opacity: 0.71;\n}\n\n.image-div {\n  height: 100%;\n  width: 100%;\n  background-size: cover;\n}\n\n.gallery {\n  display: flex;\n  flex-wrap: wrap;\n  // align-content: flex-start;\n  align-items: flex-start;\n  height: 100vh;\n}\n\n.gallery a {\n  flex-grow: 1;\n  margin: 5px;\n}\n</style>\n"],"sourceRoot":"src/admin/pages"}]}