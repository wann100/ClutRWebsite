{"remainingRequest":"/Users/kognos/Documents/GitHub/ClutRWebsite/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kognos/Documents/GitHub/ClutRWebsite/src/admin/pages/content/contents/ContentsNew.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kognos/Documents/GitHub/ClutRWebsite/src/admin/pages/content/contents/ContentsNew.vue","mtime":1565240946487},{"path":"/Users/kognos/Documents/GitHub/ClutRWebsite/node_modules/cache-loader/dist/cjs.js","mtime":1565232945238},{"path":"/Users/kognos/Documents/GitHub/ClutRWebsite/node_modules/babel-loader/lib/index.js","mtime":1558705227210},{"path":"/Users/kognos/Documents/GitHub/ClutRWebsite/node_modules/cache-loader/dist/cjs.js","mtime":1565232945238},{"path":"/Users/kognos/Documents/GitHub/ClutRWebsite/node_modules/vue-loader/lib/index.js","mtime":1565232945777}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport firebase from \"firebase/app\"\nimport \"firebase/storage\"\nimport { mediaRef } from \"@/admin/firebase_config\"\nimport editorOptions from \"@/admin/utils/editor-options\"\nimport imageLoader from \"@/admin/mixins/image-loader\"\nimport notifier from \"@/admin/mixins/notifier\"\n// Import component\nimport Loading from \"vue-loading-overlay\"\n// Import stylesheet\nimport \"vue-loading-overlay/dist/vue-loading.css\"\n\nexport default {\n  name: \"content-new\",\n  components: {\n    Loading\n  },\n  firebase: {\n    media: mediaRef\n  },\n  props: [\"add-content\", \"fields\"],\n  mixins: [imageLoader, notifier],\n  data() {\n    return {\n      imagePreview: null,\n      newContent: {\n        tags: []\n      },\n      inputData: '',\n      booleanName: '',\n      editorOptions,\n      select: {\n        selected:'',\n        options:[]\n      },\n      selectOptionsRow: '',\n      urlContentData: {\n        name: '',\n        link: ''\n      },\n      isLoading: false,\n      fullPage: true\n    };\n  },\n  methods: {\n    add(state) {\n      this.newContent.created = Date.now()\n      this.newContent.selected = false\n      this.newContent.state = state\n\n      this.addContent(this.newContent)\n      this.$router.push({ path: \"/admin/content/\" + this.$route.params.key })\n    },\n    uploadFeaturedImage(e, fieldName) {\n      this.isLoading = true;\n      let file = e.target.files[0];\n      let storageRef = firebase.storage().ref(\"images/\" + file.name)\n\n      storageRef.put(file).then(snapshot => {\n        snapshot.ref\n          .getDownloadURL()\n          .then(downloadURL => {\n            this.$set(this, \"imagePreview\", URL.createObjectURL(file))\n            this.newContent[fieldName] = \"\"\n            this.newContent[fieldName] = downloadURL\n            if (\n              Object.values(this.media).find(\n                e => e.path === snapshot.ref.fullPath\n              )\n            )\n              return; // this prevents duplicate entries in the media object\n            this.$firebaseRefs.media.push({\n              src: downloadURL,\n              path: snapshot.ref.fullPath,\n              name: snapshot.metadata.name\n            });\n          })\n          .then(() => {\n            this.isLoading = false\n          });\n      });\n    },\n    createUrlnewContent(fieldName) {\n      if (this.urlContentData.name !== \"\") {\n        if (!this.newContent[fieldName]) {\n          this.newContent[fieldName] = { name: \"\", link: \"\" }\n        }\n        this.newContent[fieldName].name = this.urlContentData.name;\n        this.newContent[fieldName].link = this.urlContentData.link;\n      }\n    },\n    createNewBoolContent(fieldName) {\n      if (this.booleanName !== \"\") {\n        if (!this.newContent[fieldName]) {\n          this.newContent[fieldName] = ''\n        }\n        this.newContent[fieldName] = this.booleanName\n      }\n    },\n    styleTags(fieldName) {\n      if (this.inputData !== '') {\n        if (!this.newContent[fieldName]) {\n          this.newContent[fieldName] = []\n        }\n        this.inputData.split(',').forEach(tag => {\n          this.newContent[fieldName].push(`${tag.trim()}`)\n        });\n        this.inputData = ''\n      }\n    },\n    removeTag(index, fieldName,isSelect) {\n      // function to remove tags and options\n      // cloning object (to make Vue reactive)\n      let currentContent = Object.assign({}, this.newContent)\n      if(isSelect) {\n        // delete element from select options\n        currentContent[fieldName].options.splice(index, 1)\n      } else {\n        // delete element from arr\n        currentContent[fieldName].splice(index, 1)\n      }\n      // return cloned object Back\n      this.newContent = Object.assign({}, currentContent)\n    },\n    // function to create Select Options from input area\n    styleOptions (fieldName) {\n      if (this.selectOptionsRow !== '') {\n        if (!this.newContent[fieldName]) {\n          this.newContent[fieldName] = this.select\n        }\n        this.selectOptionsRow.split(',').forEach(tag => {\n          this.select.options.push(`${tag.trim()}`)\n        })\n        this.newContent[fieldName] = this.select\n\n        this.selectOptionsRow = ''\n      }\n    }\n  }\n}\n",{"version":3,"sources":["ContentsNew.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"ContentsNew.vue","sourceRoot":"src/admin/pages/content/contents","sourcesContent":["<template>\n  <div class=\"box\">\n    <loading color=\"#3b9169\" :active.sync=\"isLoading\" :can-cancel=\"false\" :is-full-page=\"fullPage\"></loading>\n\n    <div class=\"columns\">\n      <div class=\"column is-two-thirds\">\n        <!-- Textbox fields -->\n        <div\n          class=\"field\"\n          v-for=\"(field, index) in fields\"\n          :key=\"index\"\n          v-if=\"field.type === 'textbox'\"\n        >\n          <label class=\"label\">{{ field.name }}</label>\n          <div class=\"control\">\n            <input\n              type=\"text\"\n              class=\"input\"\n              maxlength=\"25\"\n              required\n              :placeholder=\"field.name\"\n              v-model=\"newContent[field.name]\"\n            >\n          </div>\n        </div>\n\n        <!-- Textarea fields -->\n        <div\n          class=\"field\"\n          v-for=\"(field, index) in fields\"\n          :key=\"index\"\n          v-if=\"field.type === 'textarea'\"\n        >\n          <label class=\"label\">{{ field.name }}</label>\n          <div class=\"control\">\n            <textarea\n              class=\"input\"\n              v-model=\"newContent[field.name]\"\n              :placeholder=\"field.name\"\n              v-text=\"newContent[field.name]\"\n            ></textarea>\n          </div>\n        </div>\n\n        <!-- Rich text fields - vue-quill-editor plugin -->\n        <div v-for=\"(field, index) in fields\" :key=\"index\" v-if=\"field.type === 'richtextbox'\">\n          <quill-editor v-model=\"newContent[field.name]\" :options=\"editorOptions\"></quill-editor>\n          <input type=\"file\" id=\"getImage\" style=\"display: none;\" @change=\"uploadImage\">\n        </div>\n\n        <!-- Category (select) fields -->\n        <br>\n        <div\n          class=\"field\"\n          v-for=\"(field, index) in fields\"\n          :key=\"index\"\n          v-if=\"field.type === 'select'\"\n        >\n          <label class=\"label\">{{ field.name }}</label>\n          <div class=\"columns\">\n            <div class=\"column\">\n              <div class=\"select margin-select\">\n                <select v-model=\"select.selected\">\n                  <option\n                    v-for=\"(selectOption, selectIndex) in select.options\"\n                    :key=\"selectIndex\"\n                  >{{ selectOption }}</option>\n                </select>\n              </div>\n            </div>\n            <div class=\"column\">\n              <!--area to delete options-->\n              <div v-for=\"(option, optionKey) in select.options\" :key=\"optionKey\">\n                <span @click=\"removeTag(optionKey, field.name, true)\" class=\"tag is-info pointer\">\n                  {{option}}\n                  <button class=\"delete is-small\"></button>\n                </span>\n              </div>\n            </div>\n          </div>\n          <!--area to enter options-->\n          <div class=\"control\">\n            <input\n              type=\"text\"\n              class=\"input\"\n              :placeholder=\"field.name\"\n              @blur=\"styleOptions(field.name)\"\n              @keyup.enter=\"styleOptions(field.name)\"\n              v-model=\"selectOptionsRow\"\n              maxlength=\"25\"\n            >\n          </div>\n          <p>Separate options with commas</p>\n        </div>\n\n        <!-- Integer fields -->\n        <br>\n        <div\n          class=\"field\"\n          v-for=\"(field, index) in fields\"\n          :key=\"index\"\n          v-if=\"field.type === 'integer'\"\n        >\n          <label class=\"label\">{{ field.name }}</label>\n          <div class=\"columns\">\n            <div class=\"column is-one-third\">\n              <input \n                type=\"number\" \n                :placeholder=\"field.name\" \n                class=\"input\"\n                v-model=\"newContent[field.name]\"\n              >\n            </div>\n          </div>\n        </div>\n\n        <!-- Boolean fields -->\n        <br>\n        <div\n          class=\"field\"\n          v-for=\"(field, index) in fields\"\n          :key=\"index\"\n          v-if=\"field.type === 'boolean'\"\n        >\n          <label class=\"label\">{{ field.name }}</label>\n          <div class=\"columns\">\n            <div class=\"column is-one-third\">\n              <span>Name</span>\n              <input\n                :placeholder=\"field.name + ' name'\"\n                class=\"input\"\n                v-model=\"booleanName\"\n                @blur=\"createNewBoolContent(field.name)\"\n                @keyup.enter=\"createNewBoolContent(field.name)\"\n              >\n            </div>\n          </div>\n          <div class=\"columns\">\n            <div class=\"column\">\n              <label class=\"checkbox\">\n                <input type=\"checkbox\">\n                {{ booleanName }}\n              </label>\n            </div>\n          </div>\n        </div>\n\n        <!-- Url fields -->\n        <br>\n        <div\n          class=\"field\"\n          v-for=\"(field, index) in fields\"\n          :key=\"index\"\n          v-if=\"field.type === 'url'\"\n        >\n          <label class=\"label\">{{ field.name }}</label>\n          <div class=\"columns\">\n            <div class=\"column is-two-fifths\">\n              <span>Name</span>\n              <input\n                :placeholder=\"field.name + ' name'\"\n                class=\"input\"\n                v-model=\"urlContentData.name\"\n                @blur=\"createUrlnewContent(field.name)\"\n                @keyup.enter=\"createUrlnewContent(field.name)\"\n              >\n            </div>\n            <div class=\"column is-two-fifths\">\n              <span>Link</span>\n              <input\n                :placeholder=\"field.name + ' link'\"\n                class=\"input\"\n                v-model=\"urlContentData.link\"\n                @blur=\"createUrlnewContent(field.name)\"\n                @keyup.enter=\"createUrlnewContent(field.name)\"\n              >\n            </div>\n          </div>\n          <div class=\"columns\">\n            <div class=\"column\">\n              <span>Preview:</span>\n              <a :href=\"urlContentData.link\">{{ urlContentData.name }}</a>\n            </div>\n          </div>\n        </div>\n        <!---->\n      </div>\n\n      <!-- Right sidebar -->\n      <div class=\"column is-one-third\">\n        <!-- Tag fields -->\n        <div\n          class=\"field\"\n          v-for=\"(field, index) in fields\"\n          :key=\"index\"\n          v-if=\"field.type === 'tags'\"\n        >\n          <label class=\"label\">{{ field.name }}</label>\n          <div class=\"control\">\n            <div class=\"tags tagscontainer\">\n              <span\n                @click=\"removeTag(tagKey, field.name)\"\n                v-for=\"(tag, tagKey) in newContent[field.name]\"\n                :key=\"tagKey\"\n                class=\"tag is-info pointer\"\n              >\n                {{tag}}\n                <button class=\"delete is-small\"></button>\n              </span>\n              <input\n                :placeholder=\"field.name\"\n                @blur=\"styleTags(field.name)\"\n                @keyup.enter=\"styleTags(field.name)\"\n                type=\"text\"\n                class=\"input\"\n                maxlength=\"25\"\n                v-model=\"inputData\"\n              >\n            </div>\n            <p>Separate tags with commas</p>\n          </div>\n        </div>\n\n        <!-- Image fields -->\n        <div\n          class=\"field\"\n          v-for=\"(field, index) in fields\"\n          :key=\"index\"\n          v-if=\"field.type === 'image'\"\n        >\n          <label class=\"label\">{{ field.name }}</label>\n          <div class=\"control\">\n            <img v-if=\"imagePreview\" :src=\"imagePreview\">\n            <div class=\"file\">\n              <label class=\"file-label\">\n                <input\n                  @change=\"uploadFeaturedImage($event, field.name)\"\n                  class=\"file-input\"\n                  type=\"file\"\n                  name=\"resume\"\n                >\n                <span class=\"file-cta\">\n                  <span class=\"file-icon\">\n                    <i class=\"fa fa-upload\"></i>\n                  </span>\n                  <span class=\"file-label\">Choose a file…</span>\n                </span>\n              </label>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- notification -->\n    <div v-if=\"notification.message\" :class=\"'notification is-' + notification.type\">\n      <button class=\"delete\" @click=\"hideNotifications\"></button>\n      {{notification.message}}\n    </div>\n\n    <!-- the form buttons -->\n    <button type=\"submit\" class=\"button is-success\" @click=\"add('published')\">Publish</button>\n    <button type=\"submit\" class=\"button is-info\" @click=\"add('saved')\">Save Draft</button>\n    <router-link :to=\"'/admin/content/' + $route.params.key\" class=\"button is-danger\">Cancel</router-link>\n  </div>\n</template>\n\n<script>\nimport firebase from \"firebase/app\"\nimport \"firebase/storage\"\nimport { mediaRef } from \"@/admin/firebase_config\"\nimport editorOptions from \"@/admin/utils/editor-options\"\nimport imageLoader from \"@/admin/mixins/image-loader\"\nimport notifier from \"@/admin/mixins/notifier\"\n// Import component\nimport Loading from \"vue-loading-overlay\"\n// Import stylesheet\nimport \"vue-loading-overlay/dist/vue-loading.css\"\n\nexport default {\n  name: \"content-new\",\n  components: {\n    Loading\n  },\n  firebase: {\n    media: mediaRef\n  },\n  props: [\"add-content\", \"fields\"],\n  mixins: [imageLoader, notifier],\n  data() {\n    return {\n      imagePreview: null,\n      newContent: {\n        tags: []\n      },\n      inputData: '',\n      booleanName: '',\n      editorOptions,\n      select: {\n        selected:'',\n        options:[]\n      },\n      selectOptionsRow: '',\n      urlContentData: {\n        name: '',\n        link: ''\n      },\n      isLoading: false,\n      fullPage: true\n    };\n  },\n  methods: {\n    add(state) {\n      this.newContent.created = Date.now()\n      this.newContent.selected = false\n      this.newContent.state = state\n\n      this.addContent(this.newContent)\n      this.$router.push({ path: \"/admin/content/\" + this.$route.params.key })\n    },\n    uploadFeaturedImage(e, fieldName) {\n      this.isLoading = true;\n      let file = e.target.files[0];\n      let storageRef = firebase.storage().ref(\"images/\" + file.name)\n\n      storageRef.put(file).then(snapshot => {\n        snapshot.ref\n          .getDownloadURL()\n          .then(downloadURL => {\n            this.$set(this, \"imagePreview\", URL.createObjectURL(file))\n            this.newContent[fieldName] = \"\"\n            this.newContent[fieldName] = downloadURL\n            if (\n              Object.values(this.media).find(\n                e => e.path === snapshot.ref.fullPath\n              )\n            )\n              return; // this prevents duplicate entries in the media object\n            this.$firebaseRefs.media.push({\n              src: downloadURL,\n              path: snapshot.ref.fullPath,\n              name: snapshot.metadata.name\n            });\n          })\n          .then(() => {\n            this.isLoading = false\n          });\n      });\n    },\n    createUrlnewContent(fieldName) {\n      if (this.urlContentData.name !== \"\") {\n        if (!this.newContent[fieldName]) {\n          this.newContent[fieldName] = { name: \"\", link: \"\" }\n        }\n        this.newContent[fieldName].name = this.urlContentData.name;\n        this.newContent[fieldName].link = this.urlContentData.link;\n      }\n    },\n    createNewBoolContent(fieldName) {\n      if (this.booleanName !== \"\") {\n        if (!this.newContent[fieldName]) {\n          this.newContent[fieldName] = ''\n        }\n        this.newContent[fieldName] = this.booleanName\n      }\n    },\n    styleTags(fieldName) {\n      if (this.inputData !== '') {\n        if (!this.newContent[fieldName]) {\n          this.newContent[fieldName] = []\n        }\n        this.inputData.split(',').forEach(tag => {\n          this.newContent[fieldName].push(`${tag.trim()}`)\n        });\n        this.inputData = ''\n      }\n    },\n    removeTag(index, fieldName,isSelect) {\n      // function to remove tags and options\n      // cloning object (to make Vue reactive)\n      let currentContent = Object.assign({}, this.newContent)\n      if(isSelect) {\n        // delete element from select options\n        currentContent[fieldName].options.splice(index, 1)\n      } else {\n        // delete element from arr\n        currentContent[fieldName].splice(index, 1)\n      }\n      // return cloned object Back\n      this.newContent = Object.assign({}, currentContent)\n    },\n    // function to create Select Options from input area\n    styleOptions (fieldName) {\n      if (this.selectOptionsRow !== '') {\n        if (!this.newContent[fieldName]) {\n          this.newContent[fieldName] = this.select\n        }\n        this.selectOptionsRow.split(',').forEach(tag => {\n          this.select.options.push(`${tag.trim()}`)\n        })\n        this.newContent[fieldName] = this.select\n\n        this.selectOptionsRow = ''\n      }\n    }\n  }\n}\n</script>\n\n<style>\n.tagscontainer {\n  border: 2px solid #f2f2f2;\n  border-radius: 5px;\n  padding: 5px;\n}\n.pointer {\n  cursor: pointer;\n}\n.ql-container {\n  min-height: 200px;\n}\n.margin-select {\n  margin-bottom: 25px;\n}\n</style>\n"]}]}